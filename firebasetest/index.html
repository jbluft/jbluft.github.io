<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<h1>Hello <span id="clientName"></span></h1>
	<img id="clientPhoto" src="">
</body>

<input type="button" onclick=callGoogleSignIn() value="Google Sign In"/>




<script src="https://www.gstatic.com/firebasejs/4.8.2/firebase.js"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAS24DZUhpFQ34KXStgJf7FGqSvknf9dNk",
    authDomain: "marvel-test-f32a9.firebaseapp.com",
    databaseURL: "https://marvel-test-f32a9.firebaseio.com",
    projectId: "marvel-test-f32a9",
    storageBucket: "marvel-test-f32a9.appspot.com",
    messagingSenderId: "1000127600825"
  };
  firebase.initializeApp(config);


/* function callGoogleSignIn(){
          var provider = new firebase.auth.GoogleAuthProvider();
          firebase.auth().signInWithRedirect(provider);

          firebase.auth().getRedirectResult().then(function(result) {
    		var token = result.credential.accessToken;
    		currentUser = result.user;
    		console.log(token);
    		console.log(user.displayName);

      	})
  };
*/


function callGoogleSignIn() {
	function newLoginHappened(user) {
		if (user) {
			//user is signed in
			app(user);
			} else {
				var provider = new firebase.auth.GoogleAuthProvider();
				firebase.auth().signInWithRedirect(provider);
			}

	}
	firebase.auth().onAuthStateChanged(newLoginHappened);
}

function app(user) {
	//user.displayName
	//user.email
	//user.photoURL
	//user.uid
	document.getElementById('clientName').innerHTML = user.displayName;
	document.getElementById('clientPhoto').setAttribute('src', user.photoURL);
}


</script>
</html>